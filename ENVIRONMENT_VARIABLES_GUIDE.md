# Environment Variables Configuration Guide

## üöÄ Backend Deployment on Render

### Required Environment Variables for Render

Copy these into your Render service environment variables:

```bash
# ====== CORE CONFIGURATION ======
NODE_ENV=production
PORT=10000

# ====== DATABASE CONFIGURATION ======
# This will be auto-provided by Render when you link your PostgreSQL database
DATABASE_URL=[AUTO-PROVIDED BY RENDER]

# ====== AUTHENTICATION ======
# Generate a strong JWT secret (or let Render auto-generate)
JWT_SECRET=[AUTO-GENERATED BY RENDER]

# ====== FRONTEND CONFIGURATION ======
FRONTEND_URL=https://iwanyu-2-0.vercel.app
CORS_ORIGIN=https://iwanyu-2-0.vercel.app
ALLOWED_ORIGINS=https://iwanyu-2-0.vercel.app

# ====== FLUTTERWAVE PAYMENT GATEWAY ======
FLUTTERWAVE_PUBLIC_KEY=FLWPUBK-80beae9a1e1463654d41a8e4d00515dd-X
FLUTTERWAVE_SECRET_KEY=FLWSECK-cc842f4c47bf0059d3854bf053c11296-1973d2d141dvt-X
FLUTTERWAVE_ENCRYPTION_KEY=cc842f4c47bf3f882628801e

# ====== OPTIONAL DATABASE TUNING ======
DB_CONNECTION_LIMIT=20
DB_POOL_TIMEOUT=60
DB_STATEMENT_TIMEOUT=30000
```

### Render Service Configuration

In your Render dashboard:

1. **Service Type:** Web Service
2. **Build Command:** `cd backend && ./render-deploy.sh`
3. **Start Command:** `cd backend && ./render-start.sh`
4. **Health Check Path:** `/health`
5. **Plan:** Free (or higher)
6. **Root Directory:** `backend`

---

## üåê Frontend Deployment on Vercel

### Required Environment Variables for Vercel

Add these to your Vercel project settings under Environment Variables:

```bash
# ====== API BACKEND CONFIGURATION ======
REACT_APP_API_URL=https://iwanyu-backend.onrender.com/api

# ====== APPLICATION BRANDING ======
REACT_APP_APP_NAME=Iwanyu Store

# ====== PAYMENT GATEWAY ======
REACT_APP_FLUTTERWAVE_PUBLIC_KEY=FLWPUBK-80beae9a1e1463654d41a8e4d00515dd-X

# ====== BUILD OPTIMIZATION ======
CI=false
GENERATE_SOURCEMAP=false
NODE_OPTIONS=--max-old-space-size=4096

# ====== OPTIONAL ANALYTICS (if needed) ======
# REACT_APP_GA_TRACKING_ID=your-google-analytics-id
# REACT_APP_SENTRY_DSN=your-sentry-dsn

# ====== OPTIONAL FEATURE FLAGS ======
# REACT_APP_ENABLE_ANALYTICS=true
# REACT_APP_ENABLE_DEBUGGING=false
```

### Vercel Project Configuration

In your Vercel dashboard:

1. **Framework Preset:** Create React App
2. **Root Directory:** `iwanyu-frontend`
3. **Build Command:** `npm run build`
4. **Output Directory:** `build`
5. **Install Command:** `npm install`

---

## üîß Step-by-Step Setup Instructions

### For Render (Backend):

1. Create a new Web Service
2. Connect your GitHub repository
3. Set Root Directory to `backend`
4. Add all environment variables listed above
5. Create a PostgreSQL database and link it (DATABASE_URL will be auto-provided)
6. Deploy!

### For Vercel (Frontend):

1. Import your GitHub repository
2. Set Root Directory to `iwanyu-frontend`
3. Add all environment variables listed above
4. Make sure REACT_APP_API_URL points to your Render backend URL
5. Deploy!

---

## ‚ö° Quick Copy-Paste for Render Environment Variables

```
NODE_ENV=production
PORT=10000
FRONTEND_URL=https://iwanyu-2-0.vercel.app
CORS_ORIGIN=https://iwanyu-2-0.vercel.app
ALLOWED_ORIGINS=https://iwanyu-2-0.vercel.app
FLUTTERWAVE_PUBLIC_KEY=FLWPUBK-80beae9a1e1463654d41a8e4d00515dd-X
FLUTTERWAVE_SECRET_KEY=FLWSECK-cc842f4c47bf0059d3854bf053c11296-1973d2d141dvt-X
FLUTTERWAVE_ENCRYPTION_KEY=cc842f4c47bf3f882628801e
DB_CONNECTION_LIMIT=20
DB_POOL_TIMEOUT=60
DB_STATEMENT_TIMEOUT=30000
```

## ‚ö° Quick Copy-Paste for Vercel Environment Variables

```
REACT_APP_API_URL=https://iwanyu-backend.onrender.com/api
REACT_APP_APP_NAME=Iwanyu Store
REACT_APP_FLUTTERWAVE_PUBLIC_KEY=FLWPUBK-80beae9a1e1463654d41a8e4d00515dd-X
CI=false
GENERATE_SOURCEMAP=false
NODE_OPTIONS=--max-old-space-size=4096
```

---

## üîç Important Notes

1. **DATABASE_URL and JWT_SECRET** will be auto-generated by Render when you create and link services
2. **Update the backend URL** in the frontend environment variables once your Render service is deployed
3. **Flutterwave keys** are the live keys - make sure they're correct for production
4. **Frontend URL** in backend environment variables should match your Vercel deployment URL
5. **CORS configuration** ensures your frontend can communicate with the backend

## üîÑ After Deployment

1. Test the health endpoint: `https://your-render-app.onrender.com/health`
2. Verify frontend can connect to backend
3. Test payment flow with Flutterwave
4. Monitor logs for any issues
